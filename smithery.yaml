# Smithery configuration file: https://smithery.ai/docs/build/project-config

startCommand:
  type: stdio
  configSchema:
    # JSON Schema defining the configuration options for the MCP.
    type: object
    properties:
      MCP_NIXOS_LOG_LEVEL:
        type: string
        default: INFO
        description: Logging level for the MCP-NixOS server
  commandFunction:
    # A JS function that produces the CLI command based on the given config to start the MCP on stdio.
    |
    (config) => {
      const env = {};
      
      for (const [key, value] of Object.entries(config)) {
        if (value !== undefined && value !== null) {
          env[key] = String(value);
        }
      }
      
      return {
        command: "python",
        args: ["-m", "mcp_nixos"],
        env
      };
    }
